name: Build Matrix

on:
workflow_dispatch:

jobs:
build:
runs-on: ubuntu-latest
strategy:
matrix:
build-type: [debug, release]

steps:
  - name: Checkout repository
    uses: actions/checkout@v4

  - name: Set up JDK 17
    uses: actions/setup-java@v4
    with:
      java-version: '17'
      distribution: 'temurin'
      cache: 'gradle'

  - name: Grant execute permission for gradlew
    run: chmod +x gradlew

  - name: Build ${{ matrix.build-type }} APK
    run: ./gradlew assemble${{ matrix.build-type }}

  - name: Upload ${{ matrix.build-type }} APK
    uses: actions/upload-artifact@v4
    with:
      name: ${{ matrix.build-type }}-apk
      path: app/build/outputs/apk/${{ matrix.build-type }}/app-${{ matrix.build-type }}.apk
